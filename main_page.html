<!DOCTYPE HTML>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">   
    <title>Covid-19 Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
</head>
<style>
    body{
      font-family: 'Bebas Neue', cursive;
      background: linear-gradient(#d1dcf0, #f1dada);
    }
    .navbar {
        background-color: rgb(63, 60, 60);
        /* border-radius: 100px; */
        height: 20px;
        margin: -23px 0px;
        /* width: 1200px;S */
        padding: 2px 0px;
    }
    /* .navbar ul {
        overflow: auto;
    } */
    .navbar li {
        float: left;
        list-style: none;  
        font-size: 10px;
    }
    .navbar li a {
        color: rgb(255, 255, 255);
        font-family: 'Times New Roman', Times, serif;
        text-decoration: none;
        padding: 5px 10px;
    }
    .navbar li a:hover {
        color: rgb(235, 178, 93);
    }
    .top{
        display: inline-block;
        position: absolute;
    }
    img {
        width: 100px;
        border-radius: 10px;
        margin: 0px 12px;
        margin-top: 30px;
    }
    h2 {
        font-size: 20px;
        margin: 10px 5px;
        text-decoration: underline;
        font-family: 'Bebas Neue', cursive;            
    }
    #selection-div{
        position: relative;
        margin: 5px 0px;
        padding: 15px;
    }
    #selection{
        text-align: center;
    } 
    #earth_div{
        height: 700px;
        margin: auto;
        border-radius: 50px;
        width: 900px;
    }
    #countryName{
        padding: 5px 30px;
        display: inline-block;
        color: black;
        margin-left: 46.5%;
    }
    .row.my-4{
        justify-content: space-evenly;
    }
    .col-4{
        background-color: #f0d35e;
        border:solid white 2px; 
        font-family: 'Bebas Neue', cursive; 
        font-size: 20px;
        text-align: center;
    }
    .alert{
        background-color: #f0d35e;
        margin: 10px;
        border: #f0d35e;
    }
    #btn1{
        border: black solid 2px;
        background-color: rgb(119, 196, 206);
        padding: 1px 4px;
        color: white;
        cursor: pointer;
        width:37%;
        font-size: 20px; 
        margin-top: 10px;
    }
    .container1{
        transition: all 1s ease-out;    
    }
    .container1:hover{
        transform: scale(1.2);
    }
    #para1{
        border: black solid 2px;
        width: 37%;
    }
    #btn2 {
        border: black solid 2px;
        background-color: rgb(119, 196, 206);
        padding: 10px 14px;
        color: white;
        cursor: pointer;
        width: 37%;
        font-size: 20px; 
        margin-top: 10px;   
    }
    .container2{
        transition: all 1s ease-out;    
    }
    .container2:hover{
        transform: scale(1.2);
    }
    #para2{
        border: black solid 2px;
        width: 37%;
    }
    #btn {
        border: black solid 2px;
        background-color: rgb(119, 196, 206);
        padding: 10px 14px;
        color: white;
        cursor: pointer;
        width: 50%;
        font-size: 20px;
        margin-top: 10px;
    }
    .container{
        transition: all 1s ease-out;    
    }
    .container:hover{
        transform: scale(1.2);
    }
    #para{
        border: black solid 2px;
        width: 50%;
    }
</style>'
<header>
    <nav class="navbar">
        <ul>
            <li><a href="http://127.0.0.1:5501/Final_project.html" id="anchor" >|^|&nbsp;Home</a></li>
            <li><a href="http://127.0.0.1:5501/About.html" id="about" >+&nbsp;About Us</a></li>
            <li><a href="https://news.google.com/topstories?hl=en-IN&gl=IN&ceid=IN:en" target="_blank">#&nbsp;Latest News</a></li>
        <!-- </div> -->
        </ul>
    </nav>
</header>
<header class="top">
    <img src="corona.jpg" alt="Error">
    <h2>Covid-19 Tracker</h2>
</header>
<div class="my-3" align="center" id="selection-div">
    <select id="selection" name="selection">  
        <option class="selection-option" disabled="">Worldwide</option>
        <option class="selection-category" >Countries</option>   
        <option class="selection-option" value="Afghanistan">Afghanistan</option>
        <option class="selection-option" value="Albania">Albania</option>
        <option class="selection-option" value="Algeria">Algeria</option>
        <option class="selection-option" value="Andorra">Andorra</option>
        <option class="selection-option" value="Angola">Angola</option>
        <option class="selection-option" value="Antigua and Barbuda">Antigua and Barbuda</option>
        <option class="selection-option" value="Argentina">Argentina</option>
        <option class="selection-option" value="Armenia">Armenia</option>
        <option class="selection-option" value="Aruba">Aruba</option>
        <option class="selection-option" value="Australia">Australia</option>
        <option class="selection-option" value="Austria">Austria</option>
        <option class="selection-option" value="Azerbaijan">Azerbaijan</option>
        <option class="selection-option" value="Bahamas">Bahamas</option>
        <option class="selection-option" value="Bahrain">Bahrain</option>
        <option class="selection-option" value="Bangladesh">Bangladesh</option>
        <option class="selection-option" value="Barbados">Barbados</option>
        <option class="selection-option" value="Belarus">Belarus</option>
        <option class="selection-option" value="Belgium">Belgium</option>
        <option class="selection-option" value="Belize">Belize</option>
        <option class="selection-option" value="Benin">Benin</option>
        <option class="selection-option" value="Bermuda">Bermuda</option>
        <option class="selection-option" value="Bhutan">Bhutan</option>
        <option class="selection-option" value="Bolivia">Bolivia</option>
        <option class="selection-option" value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
        <option class="selection-option" value="Botswana">Botswana</option>
        <option class="selection-option" value="Brazil">Brazil</option>
        <option class="selection-option" value="Brunei">Brunei</option>
        <option class="selection-option" value="Bulgaria">Bulgaria</option>
        <option class="selection-option" value="Burkina Faso">Burkina Faso</option>
        <option class="selection-option" value="Burundi">Burundi</option>
        <option class="selection-option" value="Cabo Verde">Cabo Verde</option>
        <option class="selection-option" value="Cambodia">Cambodia</option>
        <option class="selection-option" value="Cameroon">Cameroon</option>
        <option class="selection-option" value="Canada">Canada</option>
        <option class="selection-option" value="Central African Republic">Central African Republic</option>
        <option class="selection-option" value="Chad">Chad</option>
        <option class="selection-option" value="Chile">Chile</option>
        <option class="selection-option" value="China">China</option>
        <option class="selection-option" value="Colombia">Colombia</option>
        <option class="selection-option" value="Comoros">Comoros</option>
        <option class="selection-option" value="Congo">Congo</option>
        <option class="selection-option" value="Congo (Brazzaville)">Congo (Brazzaville)</option>
        <option class="selection-option" value="Congo (Kinshasa)">Congo (Kinshasa)</option>
        <option class="selection-option" value="Costa Rica">Costa Rica</option>
        <option class="selection-option" value="Cote D'ivoire">Cote D'ivoire</option>
        <option class="selection-option" value="Croatia">Croatia</option>
        <option class="selection-option" value="Diamond Princess">(Cruise ship) Diamond Princess</option>
        <option class="selection-option" value="MS Zaandam">(Cruise ship) MS Zaandam</option>
        <option class="selection-option" value="Cuba">Cuba</option>
        <option class="selection-option" value="Cyprus">Cyprus</option>
        <option class="selection-option" value="Czech Republic">Czech Republic</option>
        <option class="selection-option" value="Denmark">Denmark</option>
        <option class="selection-option" value="Djibouti">Djibouti</option>
        <option class="selection-option" value="Dominica">Dominica</option>
        <option class="selection-option" value="Dominican Republic">Dominican Republic</option>
        <option class="selection-option" value="Ecuador">Ecuador</option>
        <option class="selection-option" value="Egypt">Egypt</option>
        <option class="selection-option" value="El Salvador">El Salvador</option>
        <option class="selection-option" value="Equatorial Guinea">Equatorial Guinea</option>
        <option class="selection-option" value="Eritrea">Eritrea</option>
        <option class="selection-option" value="Estonia">Estonia</option>
        <option class="selection-option" value="Eswatini">Eswatini (Swaziland)</option>
        <option class="selection-option" value="Ethiopia">Ethiopia</option>
        <option class="selection-option" value="Fiji">Fiji</option>
        <option class="selection-option" value="Finland">Finland</option>
        <option class="selection-option" value="France">France</option>
        <option class="selection-option" value="Gabon">Gabon</option>
        <option class="selection-option" value="Gambia">Gambia</option>
        <option class="selection-option" value="Georgia">Georgia</option>
        <option class="selection-option" value="Germany">Germany</option>
        <option class="selection-option" value="Ghana">Ghana</option>
        <option class="selection-option" value="Greece">Greece</option>
        <option class="selection-option" value="Greenland">Greenland</option>
        <option class="selection-option" value="Grenada">Grenada</option>
        <option class="selection-option" value="Guatemala">Guatemala</option>
        <option class="selection-option" value="Guinea">Guinea</option>
        <option class="selection-option" value="Guinea-bissau">Guinea-bissau</option>
        <option class="selection-option" value="Guyana">Guyana</option>
        <option class="selection-option" value="Haiti">Haiti</option>
        <option class="selection-option" value="Holy See">Holy See (Vatican City State)</option>
        <option class="selection-option" value="Honduras">Honduras</option>
        <option class="selection-option" value="Hungary">Hungary</option>
        <option class="selection-option" value="Iceland">Iceland</option>
        <option class="selection-option" value="India">India</option>
        <option class="selection-option" value="Indonesia">Indonesia</option>
        <option class="selection-option" value="Iran">Iran</option>
        <option class="selection-option" value="Iraq">Iraq</option>
        <option class="selection-option" value="Ireland">Ireland</option>
        <option class="selection-option" value="Israel">Israel</option>
        <option class="selection-option" value="Italy">Italy</option>
        <option class="selection-option" value="Jamaica">Jamaica</option>
        <option class="selection-option" value="Japan">Japan</option>
        <option class="selection-option" value="Jordan">Jordan</option>
        <option class="selection-option" value="Kazakhstan">Kazakhstan</option>
        <option class="selection-option" value="Kenya">Kenya</option>
        <option class="selection-option" value="Korea, North">Korea (North)</option>
        <option class="selection-option" value="Korea, South">Korea (South)</option>
        <option class="selection-option" value="Kosova">Kosovo</option>
        <option class="selection-option" value="Kuwait">Kuwait</option>
        <option class="selection-option" value="Kyrgyzstan">Kyrgyzstan</option>
        <option class="selection-option" value="Laos">Laos</option>
        <option class="selection-option" value="Latvia">Latvia</option>
        <option class="selection-option" value="Lebanon">Lebanon</option>
        <option class="selection-option" value="Lesotho">Lesotho</option>
        <option class="selection-option" value="Liberia">Liberia</option>
        <option class="selection-option" value="Libya">Libya</option>
        <option class="selection-option" value="Liechtenstein">Liechtenstein</option>
        <option class="selection-option" value="Lithuania">Lithuania</option>
        <option class="selection-option" value="Luxembourg">Luxembourg</option>
        <option class="selection-option" value="North Macedonia">Macedonia (North)</option>
        <option class="selection-option" value="Madagascar">Madagascar</option>
        <option class="selection-option" value="Malaysia">Malaysia</option>
        <option class="selection-option" value="Maldives">Maldives</option>
        <option class="selection-option" value="Mali">Mali</option>
        <option class="selection-option" value="Malta">Malta</option>
        <option class="selection-option" value="Mauritania">Mauritania</option>
        <option class="selection-option" value="Mauritius">Mauritius</option>
        <option class="selection-option" value="Mexico">Mexico</option>
        <option class="selection-option" value="Moldova">Moldova</option>
        <option class="selection-option" value="Monaco">Monaco</option>
        <option class="selection-option" value="Mongolia">Mongolia</option>
        <option class="selection-option" value="Montenegro">Montenegro</option>
        <option class="selection-option" value="Morocco">Morocco</option>
        <option class="selection-option" value="Mozambique">Mozambique</option>
        <option class="selection-option" value="Burma">Myanmar (Burma)</option>
        <option class="selection-option" value="Namibia">Namibia</option>
        <option class="selection-option" value="Nepal">Nepal</option>
        <option class="selection-option" value="Netherlands">Netherlands</option>
        <option class="selection-option" value="New Zealand">New Zealand</option>
        <option class="selection-option" value="Nicaragua">Nicaragua</option>
        <option class="selection-option" value="Niger">Niger</option>
        <option class="selection-option" value="Nigeria">Nigeria</option>
        <option class="selection-option" value="Norway">Norway</option>
        <option class="selection-option" value="Oman">Oman</option>
        <option class="selection-option" value="Pakistan">Pakistan</option>
        <option class="selection-option" value="West Bank and Gaza">Palestinian Territory, Occupied (West Bank &amp; Gaza)</option>
        <option class="selection-option" value="Panama">Panama</option>
        <option class="selection-option" value="Papua New Guinea">Papua New Guinea</option>
        <option class="selection-option" value="Paraguay">Paraguay</option>
        <option class="selection-option" value="Peru">Peru</option>
        <option class="selection-option" value="Philippines">Philippines</option>
        <option class="selection-option" value="Poland">Poland</option>
        <option class="selection-option" value="Portugal">Portugal</option>
        <option class="selection-option" value="Qatar">Qatar</option>
        <option class="selection-option" value="Romania">Romania</option>
        <option class="selection-option" value="Russia">Russia</option>
        <option class="selection-option" value="Rwanda">Rwanda</option>
        <option class="selection-option" value="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
        <option class="selection-option" value="Saint Lucia">Saint Lucia</option>
        <option class="selection-option" value="Saint Vincent and the Grenadines">Saint Vincent and the Grenadines</option>
        <option class="selection-option" value="San Marino">San Marino</option>
        <option class="selection-option" value="Saudi Arabia">Saudi Arabia</option>
        <option class="selection-option" value="Senegal">Senegal</option>
        <option class="selection-option" value="Serbia">Serbia</option>
        <option class="selection-option" value="Seychelles">Seychelles</option>
        <option class="selection-option" value="Sierra Leone">Sierra Leone</option>
        <option class="selection-option" value="Singapore">Singapore</option>
        <option class="selection-option" value="Slovakia">Slovakia</option>
        <option class="selection-option" value="Slovenia">Slovenia</option>
        <option class="selection-option" value="Solomon Islands">Solomon Islands</option>
        <option class="selection-option" value="Somalia">Somalia</option>
        <option class="selection-option" value="South Africa">South Africa</option>
        <option class="selection-option" value="Spain">Spain</option>
        <option class="selection-option" value="Sri Lanka">Sri Lanka</option>
        <option class="selection-option" value="Sudan">Sudan</option>
        <option class="selection-option" value="Suriname">Suriname</option>
        <option class="selection-option" value="Sweden">Sweden</option>
        <option class="selection-option" value="Switzerland">Switzerland</option>
        <option class="selection-option" value="Syria">Syria</option>
        <option class="selection-option" value="Taiwan*">Taiwan*</option>
        <option class="selection-option" value="Tajikistan">Tajikistan</option>
        <option class="selection-option" value="Tanzania">Tanzania</option>
        <option class="selection-option" value="Thailand">Thailand</option>
        <option class="selection-option" value="Timor-leste">Timor-Leste</option>
        <option class="selection-option" value="Togo">Togo</option>
        <option class="selection-option" value="Trinidad and Tobago">Trinidad and Tobago</option>
        <option class="selection-option" value="Tunisia">Tunisia</option>
        <option class="selection-option" value="Turkey">Turkey</option>
        <option class="selection-option" value="Turkmenistan">Turkmenistan</option>
        <option class="selection-option" value="Uganda">Uganda</option>
        <option class="selection-option" value="Ukraine">Ukraine</option>
        <option class="selection-option" value="United Arab Emirates">United Arab Emirates</option>
        <option class="selection-option" value="United Kingdom">United Kingdom</option>
        <option class="selection-option" value="US">United States</option>
        <option class="selection-option" value="Uruguay">Uruguay</option>
        <option class="selection-option" value="Uzbekistan">Uzbekistan</option>
        <option class="selection-option" value="Venezuela">Venezuela</option>
        <option class="selection-option" value="Vietnam">Vietnam</option>
        <option class="selection-option" value="Western Sahara">Western Sahara</option>
        <option class="selection-option" value="Yemen">Yemen</option>
        <option class="selection-option" value="Zambia">Zambia</option>
        <option class="selection-option" value="Zimbabwe">Zimbabwe</option>
    </select>
</div>

<body onload="initialize()" >
    <div class="container-fluid window-full" >

    <div class="column">    
        <div  id="earth_div" class="xyz" ></div>
    </div>

    <div class="col-12" >
        <div align="center">
            <button id="animateit" class="btn btn-success" style="color: white; background-color: white; border: none;"></button>
        </div>
        <div class="row my-4">
            <div class="col-4">
                <div id="confirmed" class="alert alert-primary shadow rounded"></div>
            </div>
            <div class="col-4">
                <div id="death" class="alert alert-primary shadow rounded"></div>
            </div>
        </div>
        <div id="countryName"  type="button" class="btn btn-outline-warning my-2">World</div>
    </div>

<!-- This is the design of the collapse which is present when DOM is laoded -->
<style>
    .accordions {
        font-family: arial;
        width: 100%;
        margin: 25px auto;
    }
    .accordion-item {
        background-color: #f9f9f9;
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    .accordion-item .accordion-title {
        cursor: pointer;
        padding: 20px;
        transition: all 0.4s;
        border-radius: 5px 5px 0 0;
    }
    .accordion-item .accordion-title.active-title {
        background-color: #04b8d8;
        color: #fff;
    }
    .accordion-item .accordion-title h2 {
        margin: 0;
        font-size: 18px;
        display: flex;
        justify-content: space-between;
    }
    .accordion-item .accordion-title i.fa-chevron-down {
        transform: rotate(0);
        transition: 0.4s;
    }
    .accordion-item .accordion-title i.fa-chevron-down.chevron-top {
        transform: rotate(-180deg);
    }
    .accordion-item .accordion-content {
        display: none;
        line-height: 1.7;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 0 0 5px 5px;
    }
    .accordion-item .accordion-content.active {
        display: block;
    }
    .accordion-item .accordion-content p {
        margin: 0;
    }
</style>

    <div id="chart_div" align="center">
        <div class="div4">
            <div class="container">
            <button id="btn" onclick="togglehide()">WHAT ARE SYMPTONS OF Covid-19</button>  
            <p id="para">
                1) Cough <br>
                2) Loss of Taste or Smell <br>
                3) Difficulty in Breathing
            </p>
        </div>
        <br>     
        <div class="container1">
            <button id="btn1" onclick="togglehide1()">What Are The Vaccine rate in India</button>
            <p id="para1">
                <a href="https://www.google.com/search?q=vaccine+rate+in+india&rlz=1C1UEAD_enIN978IN978&oq=Vaccine+rate+&aqs=chrome.1.69i57j0i512l9.6967j0j15&sourceid=chrome&ie=UTF-8" target="_blank"> Click here</a>
            </p>
        </div>
        <br>
        <div class="container2">
            <button id="btn2" onclick="togglehide2()">What Are The Preventions of the Covid-19</button>
            <p id="para2">
                1) Wear a Mask <br>
                2) Clean your Hands <br>
                3) Maintain Safe Distance (Atleast 1 Meter) <br>
                4) Get Vaccinated
            </p>
        </div>
    </div>
</body>
</html>

<!-- first cdn is used to load char of google -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<!-- this scipt is used to get j query -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<!-- this is cdn link of bootstrap -->
<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<!-- this is used to laod globe of earth -->
<script src="https://www.webglearth.com/v2/api.js"></script>

<script>
    let anchor=document.getElementById('anchor');
        anchor.addEventListener('click', function run(){
            alert('Are you sure want go on Home Page ?');
        });
        function togglehide() {
            let btn = document.getElementById('btn');
            let para = document.getElementById('para');
            if (para.style.display != 'none') {
                para.style.display = 'none';
            }
            else {
                para.style.display = 'block';
            }
        }
        function togglehide1() {
            let btn = document.getElementById('btn1');
            let para = document.getElementById('para1');
            if (para.style.display != 'none') {
                para.style.display = 'none';
            }
            else {
                para.style.display = 'block';
            }
        }
        function togglehide2() {
            let btn = document.getElementById('btn2');
            let para = document.getElementById('para2');
            if (para.style.display != 'none') {
                para.style.display = 'none';
            }
            else {
                para.style.display = 'block';
            }
        }
$(document).ready(function(){
    $('#content').height($(window).height());
});

var earth;
var thecountryname;
var chartdiv=document.getElementById('chart_div');
let worldDeatil=function()
{
const urlcountrycase=`https://api.covid19api.com/world/total`;
fetch(urlcountrycase)
.then(data=>{
    return data.json()
}).then(res=>{
    let confirmed=document.getElementById('confirmed');
    let recoverd=document.getElementById('recoverd');
    let death=document.getElementById('death');
    countryName.innerHTML=`WORLD`;
    confirmed.innerHTML=`<h5 style="height:30px;">CONFIRM CASE :${res.TotalConfirmed}</h5>`;
    // recoverd.innerHTML=`<h5 style="height:30px;">RECOVERED CASE :${res.TotalRecoverd}</h5>`;
    death.innerHTML=`<h5 style="height:30px;">DEATH CASE :${res.TotalDeaths}</h5>`;
});
}
worldDeatil();

let tofilldetail=function(confirmcase,recoveredcase,deathcase){
    let confirmed=document.getElementById('confirmed');
    let recoverd=document.getElementById('recoverd');
    let death=document.getElementById('death');
    countryName.innerHTML=`${thecountryname}`
    confirmed.innerHTML=`CONFIRM CASE :${confirmcase}`;
    death.innerHTML=`DEATH CASE :${deathcase}`;
    recoverd.innerHTML=`RECOVERED CASE :${recoveredcase}`;
}

// this is important beacuse we call the api only one time since we used 10 mb of data and take time to fetch we make the call and get respose in advance and used with any other country name for parsing
var newres;
const urlglobal="https://pomber.github.io/covid19/timeseries.json";
fetch(urlglobal).then(data=>{ return data.json() }).then(res=>{
    newres=res; 
});

let masterone=function(){
    let day1=newres[thecountryname];
    var result = [[]];
    console.log(day1);
    if(day1===undefined)
    {
        chartdiv.innerHTML='<div style="font-size:35px;">No result for this country </div>';
        console.log('no country found');
        thecountryname=" NO Result ";
        tofilldetail(0,0,0);
        return ;
    }
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    var i=0;
    for(i in day1){
      result[0].push([(day1[i].date),day1[i].confirmed,day1[i].deaths,day1[i].recovered]);
    }
    tofilldetail(day1[i].confirmed,day1[i].recovered,day1[i].deaths);

    function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Time&Date');
    data.addColumn('number', 'Active');
    data.addColumn('number', 'Recovered');
    data.addColumn('number', 'Death');
    data.addRows(result[0]);

    var options = {
        hAxis: {title: 'Date',  titleTextStyle: {color: '#333'}},
        vAxis: {title: 'Population',minValue: 0},
        height:370 };
    var chart = new google.visualization.LineChart(chartdiv);
        chart.draw(data, options);
    }
};

function initialize() {
var options = {
    sky: true,
    atmosphere: true,
    dragging: true,
    center: [46.8011, 8.2266],
    zoom: 2.5
};
earth = new WE.map('earth_div', options);
earth.setView([20.5937,78.9629], 3.17);
var toner = WE.tileLayer('http://tile.stamen.com/toner/{z}/{x}/{y}.png', {
});
toner.addTo(earth);

let ani=document.getElementById("animateit");
let stop=document.getElementById("stopanimateit")
ani.addEventListener('click',function(){
    let pause=true;
    stop.addEventListener('click',function(){
        pause=false;
    }) 
    var before = null;
    requestAnimationFrame(function animate(now) {
        var c = earth.getPosition();
        // console.log(c);
        var elapsed = before? now - before: 0;
        before = now;
        if (!pause) return ;
        earth.setCenter([c[0], c[1] + 0.1*(elapsed/30)]);
        requestAnimationFrame(animate);
    });
});

// this on dblclick on globe return the country name by an API
var showInfo = function(e) {
  // this again show spinner in chart div
  chartdiv.innerHTML='<div class="spinner-border spinner-border text-light"  style="width: 4rem; height: 4rem;" role="status"><span class="sr-only">Loading...</span></div>';

  // convert that lon and lat in city
  const urlCountry=`https://api.opencagedata.com/geocode/v1/json?q=${e.latitude}+${e.longitude}&key=0b3fcd7f85be42b1b69d06ea061b6b7f`;
  fetch(urlCountry)
  .then(data=>{
  return data.json()
  }).then(res=>{ 
  // with this we able to get the country name 
  thecountryname=res.results[0].components.country;
  // we again call masterone function for doing all imaporta nt work
  masterone(); 
  })
};
earth.on('dblclick', showInfo);
// on double click this work and always function without parenthis otherwise it will call directly when the dom loaded 

// // this is used fly to that countr which you selected
// var gotto=function(lat,lng){
// // earth.flyTo(lat,lng);
// // console.log(lat,lng);
// // console.log("in fly to funtion"+deatilproblem);
// earth.panTo([lat,lng]); 
// var marker = WE.marker([lat,lng]).addTo(earth)
// // markonmap();
// }




// this is closing of earth intialize object
  

  
  // here we select the option  from differnr country 
let choice=document.getElementById('selection');
choice.addEventListener('change',(event)=>{
// console.log(event.target.value);
let intlatitude;
let intlongitude;
// this will give the country name 

thecountryname=event.target.value;
  
 
console.log(thecountryname);
let countryName=document.getElementById('countryName');
countryName.innerHTML=`${event.target.value}`;

// this is the api with which we helps to get the longitude and latitude of that country
const urlCountryname=`https://api.opencagedata.com/geocode/v1/json?q=${event.target.value}&key=0b3fcd7f85be42b1b69d06ea061b6b7f`;
fetch(urlCountryname)
.then(data=>{
  // this convert into json facts 
  return data.json()
}).then(res=>{
// this result can be parsed by see in json view in browser
// console.log(res);
let latitude=res.results[0].annotations.DMS.lat.toString();
let longitude=res.results[0].annotations.DMS.lng.toString();
// thre present a sign in lat and lng we get it seprated by this 
 intlatitude=latitude.split('°');
 intlongitude=longitude.split('°');

// we load the  spinner until it fetch the charts
chartdiv.innerHTML='<div class="spinner-border spinner-border text-light"  style="width: 4rem; height: 4rem;" role="status"><span class="sr-only">Loading...</span></div>';


 // this is the master function which draw the charts and show all type of cases
masterone();  
// this help globe to animate to move that location which we selected 
 
earth.panTo([intlatitude[0],intlongitude[0] ]); 
var marker = WE.marker([intlatitude[0],intlongitude[0] ]).addTo(earth)
});

});

}

  
  

// this copied function from code pen for collapse detail 
$(document).ready(function(){
  $(".accordion-title").click(function(e){
  var accordionitem = $(this).attr("data-tab");
  $("#"+accordionitem).slideToggle().parent().siblings().find(".accordion-content").slideUp();

  $(this).toggleClass("active-title");
  $("#"+accordionitem).parent().siblings().find(".accordion-title").removeClass("active-title");

  $("i.fa-chevron-down",this).toggleClass("chevron-top");
  $("#"+accordionitem).parent().siblings().find(".accordion-title i.fa-chevron-down").removeClass("chevron-top");
  });   
});

</script>
